# Настройка системы оплаты

В этом руководстве описано, как настроить Telegram Stars и TON для приема платежей в вашем приложении.

## 1. Telegram Stars (Звезды)

Telegram Stars — это внутренняя валюта Telegram для оплаты цифровых товаров.

### Шаг 1: Включение платежей в боте
1. Откройте бота [@BotFather](https://t.me/BotFather) в Telegram.
2. Отправьте команду `/mybots` и выберите вашего бота.
3. Нажмите **Payments**.
4. Выберите **Telegram Stars**.
5. Следуйте инструкциям для включения. Обычно это происходит автоматически для цифровых товаров.

### Шаг 2: Получение токена (если требуется)
В большинстве случаев для Stars отдельный токен не нужен, платежи работают через стандартный API бота. Если BotFather выдаст вам "Provider Token" (например, для тестовых платежей), сохраните его.

**Важно:** Для тестирования можно включить **Test Mode** в BotFather -> Payments -> Telegram Stars.

---

## 2. TON Payments (Криптовалюта)

Для приема платежей в TON вам понадобится кошелек.

### Шаг 1: Создание кошелька
1. Скачайте приложение **Tonkeeper** (iOS/Android) или используйте расширение для браузера.
2. Создайте новый кошелек. **Обязательно сохраните секретную фразу (24 слова) в надежном месте!**

### Шаг 2: Получение адреса
1. В приложении Tonkeeper нажмите **Receive** (Получить).
2. Скопируйте адрес вашего кошелька (начинается с `UQ...` или `EQ...`).

### Шаг 3: Настройка приложения
1. Откройте файл `backend/.env` в папке проекта.
2. Добавьте или найдите строку `TON_WALLET_ADDRESS`.
3. Вставьте туда ваш адрес кошелька.

Пример:
```env
TON_WALLET_ADDRESS=UQB...вашадрес...
```

### Шаг 4: Тестирование (Testnet)
Для проверки работы без траты реальных денег рекомендуется использовать тестовую сеть (Testnet).
1. В Tonkeeper перейдите в настройки и включите режим разработчика (быстро нажать на версию приложения несколько раз).
2. Переключите сеть на **Testnet**.
3. Создайте Testnet-кошелек.
4. Получите бесплатные тестовые TON через [@testgiver_ton_bot](https://t.me/testgiver_ton_bot).
5. Используйте адрес Testnet-кошелька в `.env` для разработки.

---

## 3. Настройка переменных окружения (.env)

Убедитесь, что в вашем файле `backend/.env` есть следующие настройки:

```env
# Токен вашего бота (из BotFather)
BOT_TOKEN=ваш_токен_бота

# Адрес кошелька для приема TON (пока можно оставить пустым или тестовым)
TON_WALLET_ADDRESS=
```
